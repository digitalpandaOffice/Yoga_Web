<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Contact Us - Edvayu Educational Foundations</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Get in touch with Edvayu Educational Foundations in Morigaon, Assam. Call us for admissions, franchise inquiries, and support.">
    <meta name="keywords"
        content="Contact Edvayu, NIAC Contact, Admission Enquiry, Franchise Enquiry, Morigaon Art School Address">
    <meta name="author" content="Edvayu Educational Foundations">
    <meta name="robots" content="index, follow">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/AdvayuLogo.png">
    <link rel="shortcut icon" href="images/AdvayuLogo.png">
    <link rel="apple-touch-icon" href="images/AdvayuLogo.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://edvayueducationalfoundation.in/contact.html">
    <meta property="og:title" content="Contact Us - Edvayu Educational Foundations">
    <meta property="og:description"
        content="Get in touch with Edvayu Educational Foundations. We are here to answer your questions about admissions and franchises.">
    <meta property="og:image" content="https://edvayueducationalfoundation.in/images/AdvayuLogo.png">

    <!-- Canonical -->
    <link rel="canonical" href="https://edvayueducationalfoundation.in/contact.html">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300&family=Montserrat:wght@300;400;600;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="mainstyles.css">
    <link rel="stylesheet" href="contact.css">
    <link rel="icon" type="image/png" href="images/AdvayuLogo.png">
</head>

<body>
    <!-- Top Banner -->
    <div class="top-banner">
        <img src="./images/AdvayuLogo.png" alt="Logo" class="top-logo" />
        <div class="top-title-group">
            <h1 class="top-title">Edvayu Educational Foundations</h1>
            <div class="top-subtitle">CULTURAL EXAMINATION BOARD</div>
        </div>
    </div>

    <header class="site-header">
        <nav class="navbar">
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span></span><span></span><span></span>
            </button>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li class="has-dropdown">
                    <a href="index.html#student">Student Area</a>
                    <ul class="dropdown">
                        <li><a href="admissions.html">Admissions</a></li>
                        <li><a href="syllabus.html">Syllabus</a></li>
                        <li><a href="results.html">Results</a></li>
                        <li><a href="index.html#student-resources">Resources</a></li>
                    </ul>
                </li>
                <li class="has-dropdown">
                    <a href="index.html#teacher">Teacher Area</a>
                    <ul class="dropdown">
                        <li><a href="index.html#teacher-login">Login</a></li>
                        <li><a href="index.html#teacher-curriculum">Curriculum</a></li>
                        <li><a href="index.html#teacher-training">Training</a></li>
                        <li><a href="index.html#teacher-resources">Resources</a></li>
                    </ul>
                </li>
                <li class="has-dropdown">
                    <a href="index.html#courses">Diploma Exam</a>
                    <ul class="dropdown">
                        <li><a href="index.html#exam-dates">Exam Dates</a></li>
                        <li><a href="index.html#exam-eligibility">Eligibility</a></li>
                        <li><a href="syllabus.html">Syllabus</a></li>
                        <li><a href="admit_card.html">Download Admit Card</a></li>
                    </ul>
                </li>
                <li class="has-dropdown">
                    <a href="index.html#franchise">Franchise Registration</a>
                    <ul class="dropdown">
                        <li><a href="franchiseRegistrationform.html">Become a Partner</a></li>
                        <li><a href="franchise_status.html">Franchise Status</a></li>
                        <li><a href="franchise_benefits.html">Benefits</a></li>
                        <li><a href="franchise_process.html">Process</a></li>
                        <li><a href="franchise_faqs.html">FAQs</a></li>
                    </ul>
                </li>
                <li><a href="gallarysection.html">Gallery</a></li>
                <li><a href="upcoming_events.html">Upcoming Events</a></li>
                <li class="has-dropdown">
                    <a href="#other">Other</a>
                    <ul class="dropdown">
                        <li><a href="policies.html">Policies</a></li>
                        <li><a href="alumni.html">Alumni</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="page-header contact-header" id="page-hero">
            <div class="container">
                <h1 id="page-hero-title">Get in Touch</h1>
                <p id="page-hero-subtitle">We are here to answer your questions and help you start your cultural
                    journey.</p>
            </div>
        </section>

        <section class="contact-section container">
            <div class="contact-grid">
                <!-- Contact Info -->
                <div class="contact-info">
                    <h2>Contact Information</h2>
                    <p class="info-intro" id="info-intro">Reach out to us via phone, email, or visit our campus.</p>

                    <div class="info-item">
                        <div class="icon">üìç</div>
                        <div>
                            <h4>Address</h4>
                            <p id="contact-address">Edvayu Educational Foundations<br>Main Road, Morigaon<br>Assam,
                                India - 782105</p>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="icon">üìû</div>
                        <div>
                            <h4>Phone</h4>
                            <p id="contact-phone">+91 98765 43210<br>+91 3678 240000</p>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="icon">‚úâÔ∏è</div>
                        <div>
                            <h4>Email</h4>
                            <p id="contact-email">contact@niac.edu.in<br>admissions@niac.edu.in</p>
                        </div>
                    </div>

                    <div class="info-item">
                        <div class="icon">‚è∞</div>
                        <div>
                            <h4>Office Hours</h4>
                            <p id="office-hours">Mon - Sat: 9:00 AM - 5:00 PM<br>Sunday: Closed</p>
                        </div>
                    </div>
                </div>

                <!-- Contact Form -->
                <div class="contact-form-wrapper">
                    <h2>Send us a Message</h2>
                    <form class="contact-form" id="contact-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="subject">Subject</label>
                            <input type="text" id="subject" required>
                        </div>
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn primary">Send Message</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Map Section -->
        <section class="map-section">
            <iframe id="contact-map"
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d57272.77259458231!2d92.3056266!3d26.2547161!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x375a59c904797175%3A0x88960161884c7185!2sMorigaon%2C%20Assam!5e0!3m2!1sen!2sin!4v1700000000000!5m2!1sen!2sin"
                width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"></iframe>
        </section>
    </main>

    <footer id="other" class="site-footer">
        <div class="container footer-grid">
            <div>
                <h3>Edvayu Educational Foundations</h3>
                <p>Morigaon 782105, Assam, India<br />Phone: +91 98765 43210<br />Email: contact@niac.edu.in</p>
            </div>
            <div class="social">
                <h4>Follow Us</h4>
                <ul>
                    <li><a href="#" aria-label="Facebook">Facebook</a></li>
                    <li><a href="#" aria-label="Instagram">Instagram</a></li>
                    <li><a href="#" aria-label="YouTube">YouTube</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">¬© 2025 Edvayu Educational Foundations.</div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            fetchContactPageContent();
        });

        const API_BASE_URL = 'http://localhost/Yoga_Web/Yoga_Backend';

        // XSS Prevention Helper
        function escapeHtml(text) {
            if (!text) return '';
            return String(text)
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        async function fetchContactPageContent() {
            try {
                // 1. Fetch Page Specific Content (Hero, Map)
                const contentRes = await fetch(`${API_BASE_URL}/content/contact`);
                const content = await contentRes.json();

                if (content) {
                    updateText('page-hero-title', content.hero?.title);
                    updateText('page-hero-subtitle', content.hero?.subtitle);
                    updateText('info-intro', content.info_intro);

                    // Update Hero Background if available (optional extension)
                    if (content.hero?.background_image) {
                        const hero = document.getElementById('page-hero');
                        if (hero) hero.style.backgroundImage = `url('${encodeURI(content.hero.background_image)}')`;
                    }

                    // Update Map
                    if (content.map_url) {
                        const mapFrame = document.getElementById('contact-map');
                        if (mapFrame) {
                            // Ensure the URL is valid to prevent javascript: or data: abuse
                            // For simplicity, we assume it comes from trusted admin input, 
                            // but simply setting src with a URL is not a typical XSS vector if protocol is http/s.
                            mapFrame.src = content.map_url;
                        }
                    }
                }

                // 2. Fetch Global Settings (Phone, Email, Address)
                const settingsRes = await fetch(`${API_BASE_URL}/settings`);
                const settings = await settingsRes.json();

                if (settings) {
                    // Address
                    // Escape each line, then join with <br> to preserve formatting safely
                    const address = [
                        settings.address_line1,
                        settings.address_line2,
                        settings.address_state_zip
                    ].filter(Boolean).map(escapeHtml).join('<br>');
                    updateHtml('contact-address', address);

                    // Phone
                    const phones = [
                        settings.contact_phone,
                        settings.contact_phone_2
                    ].filter(Boolean).map(escapeHtml).join('<br>');
                    updateHtml('contact-phone', phones);

                    // Email
                    const emails = [
                        settings.contact_email,
                        settings.contact_email_2
                    ].filter(Boolean).map(escapeHtml).join('<br>');
                    updateHtml('contact-email', emails);

                    // Office Hours
                    const hours = settings.office_hours ? escapeHtml(settings.office_hours).replace(/\n/g, '<br>') : '';
                    updateHtml('office-hours', hours);
                }

            } catch (error) {
                console.error('Error loading contact content:', error);
            }
        }

        function updateText(id, text) {
            const el = document.getElementById(id);
            if (el && text) el.textContent = text;
        }

        function updateHtml(id, html) {
            const el = document.getElementById(id);
            if (el && html) el.innerHTML = html;
        }

        // Form Submission Handler
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();

                const submitBtn = contactForm.querySelector('button[type="submit"]');
                const originalBtnText = submitBtn.textContent;
                submitBtn.disabled = true;
                submitBtn.textContent = 'Sending...';

                // We send raw value to server, server SHOULD sanitize or strictly handle it.
                // Our XSS fix is for DISPLAYING content.
                const formData = {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    subject: document.getElementById('subject').value,
                    message: document.getElementById('message').value
                };

                try {
                    const response = await fetch(`${API_BASE_URL}/message/submit`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)
                    });

                    const result = await response.json();

                    if (response.ok) {
                        alert('Thank you! Your message has been sent successfully.');
                        contactForm.reset();
                    } else {
                        // Display error message safely? Alert treats text as text, so it's safe.
                        alert('Failed to send message: ' + (result.error || 'Unknown error'));
                    }
                } catch (error) {
                    console.error('Error submitting form:', error);
                    alert('A network error occurred. Please try again later.');
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.textContent = originalBtnText;
                }
            });
        }
    </script>
    <script src="script.js"></script>
</body>

</html>